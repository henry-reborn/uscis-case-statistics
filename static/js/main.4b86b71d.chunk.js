(this["webpackJsonpuscis-case-statistics"]=this["webpackJsonpuscis-case-statistics"]||[]).push([[0],{209:function(e,t,n){e.exports=n.p+"static/media/donation_wechat.84e04efe.jpg"},210:function(e,t,n){e.exports=n.p+"static/media/wechat_group_qr.4d5ef825.jpg"},211:function(e,t,n){e.exports=n.p+"static/media/wechat_qr.6a2dd925.jpg"},244:function(e,t,n){e.exports=n(455)},455:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(16),c=n.n(o),l=n(216),i=n(131),u=n.n(i),s=n(194),m=n(47),d=n(195),f=n.n(d),p=n(68),v=n(196),y=n.n(v),h=n(132),E=n.n(h),g=n(197),b=n(135),w=n(23),x=n(501),A=n(503),j=n(495),O=n(497),S=n(499),M=n(500),k=n(502),C=n(496),R=n(209),D=n.n(R),I=n(210),W=n.n(I),L=n(211),F=n.n(L),B=n(498),N=new Map([["Case Was Approved And My Decision Was Emailed","Case Was Approved"],["Case Was Received and A Receipt Notice Was Emailed","Case Was Received"],["Request for Initial Evidence Was Sent","Request for Additional Evidence Was Sent"],["Case Was Transferred And A New Office Has Jurisdiction","Case Transferred And New Office Has Jurisdiction"]]);function K(e){var t;return null!==(t=p.a.Map([["Case Was Received","#999900"],["Case Was Approved","#00FF00"],["Request for Additional Evidence Was Sent","#FF0000"]]).get(e))&&void 0!==t?t:(new f.a).hex(e)}var P=function(){var e,t,n,o,c,i,d=null!==(e=new URL(window.location.href).searchParams.get("form"))&&void 0!==e?e:"I-129",f=null!==(t=new URL(window.location.href).searchParams.get("center"))&&void 0!==t?t:"WAC",v=Number.parseInt(null!==(n=new URL(window.location.href).searchParams.get("workday"))&&void 0!==n?n:"0"),h=(new URL(window.location.href).searchParams.get("displaymode"),Object(a.useState)(null)),R=Object(m.a)(h,2),I=R[0],L=R[1],P=Object(a.useState)({}),Q=Object(m.a)(P,2),U=Q[0],_=Q[1],q=Object(a.useState)(0),H=Object(m.a)(q,2),J=H[0],X=H[1],T=Object(a.useState)(""),$=Object(m.a)(T,2),z=$[0],G=$[1],V=function(e,t){var n=new URL(window.location.href),a=n.searchParams;a.set(e,t),n.search=a.toString(),window.location.href=n.toString()},Y=new URL(window.location.href);Object(a.useEffect)((function(){Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y.searchParams.get("form")||V("form","I-129"),Y.searchParams.get("center")||V("center","WAC"),e.t0=_,e.t1=y.a,e.next=6,fetch("https://raw.githubusercontent.com/vicdus/uscis-case-statistics/master/src/data.json5");case 6:return e.next=8,e.sent.text();case 8:e.t2=e.sent,e.t3=e.t1.parse.call(e.t1,e.t2),(0,e.t0)(e.t3);case 11:case"end":return e.stop()}}),e)})))()}),[]);var Z=Object(a.useMemo)((function(){return p.a.List(Object.entries(U).flatMap((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1],r=n.split("|"),o=Object(m.a)(r,6),c=o[0],l=o[1],i=o[2],u=o[3],s=o[4],d=o[5];return Object.entries(a).map((function(e){return{center:c,year:l,day:i,code:u,form:s,status:d,updateDay:e[0],count:e[1]}}))}))).groupBy((function(e){var t;return e.center+e.year+e.day+e.code+e.form+(null!==(t=N.get(e.status))&&void 0!==t?t:e.status)+e.updateDay})).map((function(e){return e.toList().toArray()})).map((function(e){var t;return{center:e[0].center,year:e[0].year,day:e[0].day,code:e[0].code,form:e[0].form,status:null!==(t=N.get(e[0].status))&&void 0!==t?t:e[0].status,updateDay:e[0].updateDay,count:g.sumBy(e,(function(e){return e.count}))}})).toList()}),[U]),ee=Object(a.useMemo)((function(){return Z.filter((function(e){return e.form===d&&e.center===f}))}),[Z,d,f]),te=Object(a.useMemo)((function(){return ee.map((function(e){return Number.parseInt(e.updateDay)})).toSet().toList().sort()}),[ee]),ne=Object(a.useMemo)((function(){return ee.map((function(e){return e.count})).toSet().toList().sort()}),[ee]),ae=Object(a.useMemo)((function(){return ee.map((function(e){return Number.parseInt(e.updateDay)})).max()}),[ee]),re=Object(a.useMemo)((function(){return ee.filter((function(e){var t;return e.updateDay===(null===(t=null!==I&&void 0!==I?I:ae)||void 0===t?void 0:t.toString())}))}),[ee,I,ae]),oe=Object(a.useMemo)((function(){return Z.map((function(e){return e.form})).toSet()}),[Z]),ce=Object(a.useMemo)((function(){return Z.map((function(e){return e.center})).toSet()}),[Z]),le=Object(a.useMemo)((function(){return ee.countBy((function(e){return e.status}))}),[ee]),ie=Object(a.useMemo)((function(){return ee.map((function(e){return e.status})).toSet().toList().sortBy((function(e){var t;return-(null!==(t=le.get(e))&&void 0!==t?t:0)}))}),[ee,le]),ue=Object(a.useMemo)((function(){return ee.map((function(e){return Number.parseInt(e.day)})).toSet().toList().sort()}),[ee]),se=Object(a.useMemo)((function(){return re.groupBy((function(e){return e.day})).map((function(e,t){return Object(l.a)({day:t},e.reduce((function(e,t){return e.set(t.status,t.count)}),p.a.Map()).toObject())})).toList().sort((function(e,t){return Number.parseInt(e.day)-Number.parseInt(t.day)})).toArray()}),[re]),me=Object(a.useMemo)((function(){return ee.filter((function(e){var t;return e.updateDay===(null===(t=te.get(te.size-2))||void 0===t?void 0:t.toString())})).groupBy((function(e){return e.day})).map((function(e){return p.a.Map(e.map((function(e){return[e.status.toString(),e.count]})).toArray())}))}),[te,ee]),de=Object(a.useMemo)((function(){return ee.filter((function(e){var t;return e.updateDay===(null===(t=te.get(te.size-1))||void 0===t?void 0:t.toString())})).groupBy((function(e){return e.day})).map((function(e){return p.a.Map(e.map((function(e){return[e.status.toString(),e.count]})).toArray())}))}),[te,ee]),fe=Object(a.useMemo)((function(){return ue.map((function(e){var t;return null!==(t=se.find((function(t){return t.day===e.toString()})))&&void 0!==t?t:{day:e.toString()}})).toArray()}),[ue,se]),pe=r.a.createElement("div",null,r.a.createElement("div",{style:{width:"600px",display:"inline",float:"left"}},r.a.createElement(B.a,{id:"standard-basic",label:"\u4e5f\u53ef\u8f93\u5165\u4f60\u7684Case ID\u6765\u67e5\u8be2\u4f60\u7684\u53f7\u6bb5\u4e0b\u6240\u6709status\u7684\u6bd4\u4f8b, \u4f8b\u5982 WAC2017150172",fullWidth:!0,onChange:function(e){return G(e.target.value)}})),r.a.createElement("div",{style:{width:"100px",display:"inline",float:"left"}},r.a.createElement(C.a,{variant:"contained",color:"primary",disabled:!Boolean(z.match(/^\w{3}\d{5}5\d{4}$/)),onClick:function(){return V("workday",z.substr(5,3))}},z.match(/^\w{3}\d{5}5\d{4}$/)?"\u67e5\u8be2\u53f7\u6bb5"+z.substr(5,3):"Case ID invalid"))),ve=function(e){var t=Math.PI/180,n=e.cx,a=e.cy,o=e.name,c=e.midAngle,l=e.innerRadius,i=e.outerRadius,u=e.startAngle,s=e.endAngle,m=e.fill,d=e.payload,f=e.percent,p=e.value,v=Math.sin(-t*c),y=Math.cos(-t*c),h=n+(i+10)*y,E=a+(i+10)*v,g=n+(i+30)*y,b=a+(i+30)*v,x=g+22*(y>=0?1:-1),A=b,j=y>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement("text",{x:n,y:a,dy:8,textAnchor:"middle",fill:m},d.name),r.a.createElement(w.i,{cx:n,cy:a,innerRadius:l,outerRadius:i,startAngle:u,endAngle:s,fill:m}),r.a.createElement(w.i,{cx:n,cy:a,startAngle:u,endAngle:s,innerRadius:i+6,outerRadius:i+10,fill:m}),r.a.createElement("path",{d:"M".concat(h,",").concat(E,"L").concat(g,",").concat(b,"L").concat(x,",").concat(A),stroke:m,fill:"none"}),r.a.createElement("circle",{cx:x,cy:A,r:2,fill:m,stroke:"none"}),r.a.createElement("text",{x:x+12*(y>=0?1:-1),y:A,textAnchor:j,fill:"#333"},"".concat(o)),r.a.createElement("text",{x:x+12*(y>=0?1:-1),y:A,dy:18,textAnchor:j,fill:"#999"},"".concat(p," cases, ").concat((100*f).toFixed(2),"%")))},ye=Object(a.useMemo)((function(){var e;if(!v)return null;var t=Object.entries(null!==(e=fe.find((function(e){return e.day===v.toString()})))&&void 0!==e?e:{}).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return{name:n,value:Number.parseInt(a)}})).filter((function(e){return"day"!==e.name})).sort((function(e){return e.value}));return r.a.createElement("div",{style:{display:"block"}},r.a.createElement(w.h,{width:800,height:800},r.a.createElement(w.g,{activeIndex:J,activeShape:ve,dataKey:"value",isAnimationActive:!1,data:t,cx:400,cy:400,outerRadius:200,innerRadius:165,onMouseEnter:function(e,t){return X(t)},fill:"#8884d8"},t.map((function(e,t){return r.a.createElement(w.d,{key:t,fill:K(e.name)})}))),r.a.createElement(w.j,{offset:100})),r.a.createElement("h2",null,"\u4ee5\u4e0a\u997c\u56fe\uff1a\u53f7\u6bb5",f+"20"+v+"5XXXX"))}),[J,fe,v,f]),he=Object(a.useMemo)((function(){var e;return r.a.createElement(w.f,{width:1440,height:810,data:fe},r.a.createElement(w.c,{strokeDasharray:"3 3"}),r.a.createElement(w.k,{dataKey:"day"}),r.a.createElement(w.l,{type:"number",height:810,domain:[0,null!==(e=ne.max())&&void 0!==e?e:1]}),r.a.createElement(w.j,{offset:100,itemSorter:function(e){var t;return-e.payload[E()(null===(t=e.dataKey)||void 0===t?void 0:t.toString())]}}),ie.toArray().map((function(e,t){return r.a.createElement(w.e,{key:t,type:"linear",isAnimationActive:!1,dataKey:e,stroke:K(e)})})))}),[fe,ie,ne]),Ee=Object(a.useMemo)((function(){var e,t,n;return r.a.createElement(w.b,{height:1440,width:810,data:fe,layout:"vertical"},r.a.createElement(w.c,{strokeDasharray:"3 3"}),r.a.createElement(w.k,{type:"number",dataKey:"day",domain:[0,null!==(e=ne.max())&&void 0!==e?e:1]}),r.a.createElement(w.l,{type:"category",dataKey:"day",domain:[(null!==(t=ue.min())&&void 0!==t?t:0)-1,(null!==(n=ue.max())&&void 0!==n?n:1)+1],tick:!0,interval:0,allowDecimals:!0,ticks:ue.toArray()}),r.a.createElement(w.j,{offset:100,content:function(e){var t,n,a,o,c=e.payload,l=e.label,i=null!==(t=null===(n=de.get(l))||void 0===n?void 0:n.reduce((function(e,t){return e+t}),0))&&void 0!==t?t:1,u=null!==(a=null===(o=me.get(l))||void 0===o?void 0:o.reduce((function(e,t){return e+t}),0))&&void 0!==a?a:1;return r.a.createElement("div",{style:{backgroundColor:"#F0F8FF"}},r.a.createElement("p",null,"".concat(l)),(null!==c&&void 0!==c?c:[]).map((function(e){var t,n,a=null!==(t=null===(n=me.get(l))||void 0===n?void 0:n.get(e.dataKey))&&void 0!==t?t:0;return r.a.createElement("p",{style:{color:e.fill,marginBottom:"3px"}},"".concat(e.dataKey,": ").concat(e.value," of ").concat(i," (").concat((100*e.value/i).toFixed(2),"%), Previous day: ").concat(a," of ").concat(u,",  (").concat((100*a/u).toFixed(2),"%)"))})))},itemSorter:function(e){return-ie.indexOf(E()(e.dataKey))}}),ie.toArray().map((function(e,t){return r.a.createElement(w.a,{key:t,isAnimationActive:!1,dataKey:e,stackId:"a",fill:K(e)})})))}),[me,fe,ne,ue,ie,de]),ge=r.a.createElement("div",null,r.a.createElement("h1",null,"USCIS case progress tracker"),r.a.createElement("p",null,"Current Form: ",r.a.createElement("strong",null,d),",",r.a.createElement("br",null)," location:"," ",r.a.createElement("strong",null,f)," ,",r.a.createElement("br",null)," Last Update for this form and location:",r.a.createElement("strong",null,ae?new Date(864e5*ae+252e5).toDateString():"Not Exist currently")),r.a.createElement("h3",null,"Help needed for UI and clawer"),r.a.createElement("p",null,"GitHub project:",r.a.createElement("a",{href:"https://github.com/vicdus/uscis-case-statistics/",target:"_blank",rel:"noopener noreferrer"},"https://github.com/vicdus/uscis-case-statistics/"))),be=te.max()?r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(k.a,{style:{marginLeft:"128px",marginRight:"128px"},defaultValue:null!==(o=te.max())&&void 0!==o?o:1,onChange:function(e,t){return L(t.toString())},"aria-labelledby":"discrete-slider",valueLabelDisplay:"off",step:null,marks:te.map((function(e){return{value:e,label:1+new Date(864e5*e+252e5).getMonth()+"/"+new Date(864e5*e+252e5).getDate()}})).toArray(),min:null!==(c=te.min())&&void 0!==c?c:0,max:null!==(i=te.max())&&void 0!==i?i:1})):null,we=r.a.createElement("div",null,r.a.createElement("h3",null,"Q and A"),r.a.createElement("h4",null,"Q: \u600e\u4e48\u7528\uff1f"),r.a.createElement("p",null,"A: \u6a2a\u5750\u6807\u662f\u53f7\u6bb5\uff0c\u7eb5\u5750\u6807\u662f\u72b6\u6001\u5bf9\u5e94\u7684\u6570\u91cf\u3002"),r.a.createElement("h4",null,"Q: \u4ec0\u4e48\u662f\u53f7\u6bb5\uff1f"),r.a.createElement("p",null,"A: \u8fd9\u5f20\u56fe\u91cc\u7684working day number"),r.a.createElement("img",{alt:"day-explain",src:"https://www.am22tech.com/wp-content/uploads/2018/12/uscis-receipt-number-status-i797-notice-truvisa.jpg"}),r.a.createElement("h4",null,"Q: \u4f60\u662f\u8c01\uff1f"),r.a.createElement("p",null,"A: \u6211\u4eca\u5e74\u62bd\u4e2d\u4e86h1b, \u5728\u7b49approve"),r.a.createElement("h4",null,"Q: \u6570\u636e\u6765\u6e90\uff1f"),r.a.createElement("p",null,"A: \u679a\u4e3e\u53f7\u6bb5\u4e0b\u6240\u6709\u53ef\u80fd\u7684case number\u5e76\u722c\u53d6USCIS, \u4fdd\u5b58\u6210\u6587\u4ef6"),r.a.createElement("h4",null,"Q: \u6ca1\u6709\u6211\u7684\u53f7\u6bb5\u7684\u6570\u636e\uff1f"),r.a.createElement("p",null,"A: \u53ef\u80fd\u9700\u8981\u5730\u91cc\u5927\u5bb6\u4e00\u8d77\u6765\u722c\u5e76\u66f4\u65b0\uff0c\u7a0d\u540e\u653e\u51fa\u6b65\u9aa4"),r.a.createElement("h4",null,"Q: \u4e3a\u4ec0\u4e48\u662f\u6587\u4ef6\uff1f\u4e3a\u4ec0\u4e48\u4e0d\u7528\u6570\u636e\u5e93\uff1f"),r.a.createElement("p",null,"A: \u8d2b\u7a77"),r.a.createElement("h4",null,"Q: \u8fd9\u4e2a\u5f88\u6709\u7528\uff0c\u53ef\u4ee5\u8bf7\u4f60\u559d\u676f\u5496\u5561\u5417\uff1f"),r.a.createElement("p",null,"A: \u611f\u8c22\uff01"),r.a.createElement("img",{src:D.a,alt:"wechat_donation",style:{width:"400px",height:"560px"}}),r.a.createElement("h4",null,"Q: \u6211\u60f3\u548c\u4f60\u804a\u4e00\u804a\uff1f"),r.a.createElement("p",null,"A: \u52a0\u6211\u5fae\u4fe1\u5427\uff01"),r.a.createElement("img",{src:F.a,alt:"wechat",style:{width:"400px",height:"560px"}}),r.a.createElement("h4",null,"Q: \u8fd8\u6709\u522b\u7684\u95ee\u9898\u60f3\u8ba8\u8bba\uff1f"),r.a.createElement("p",null,"A: \u5fae\u4fe1\u7fa4\u548c",r.a.createElement("a",{href:"https://www.1point3acres.com/bbs/forum.php?mod=viewthread&tid=636011",target:"_blank",rel:"noopener noreferrer"},"\u4e00\u4ea9\u4e09\u5206\u5730\u7684\u5e16\u5b50"),"\uff0c\u8bf7\u5e2e\u6211\u52a0\u70b9\u5927\u7c73\uff1a\uff09"),r.a.createElement("img",{src:W.a,alt:"wechat_group",style:{width:"400px",height:"560px"}})),xe=r.a.createElement(b.FacebookProvider,{appId:"185533902045623"},r.a.createElement(b.Comments,{href:"https://vicdus.github.io/uscis-case-statistics/"})),Ae=r.a.createElement(x.a,{fullWidth:!0,component:"fieldset"},r.a.createElement(j.a,{component:"legend"},"Form Type"),r.a.createElement(M.a,{"aria-label":"form",name:"form",value:d,onChange:function(e){return V("form",e.target.value)},row:!0},oe.toArray().sort().map((function(e,t){return r.a.createElement(A.a,{key:t,value:e,control:r.a.createElement(S.a,null),label:e})})))),je=r.a.createElement(x.a,{fullWidth:!0,component:"fieldset"},r.a.createElement(j.a,{component:"legend"},"Center"),r.a.createElement(M.a,{"aria-label":"form",name:"form",value:f,onChange:function(e){return V("center",e.target.value)},row:!0},ce.toArray().sort().map((function(e,t){return r.a.createElement(A.a,{key:t,value:e,control:r.a.createElement(S.a,null),label:e})}))));return r.a.createElement("div",null,ge,Ae,je,pe,ye,be,Ee,he,be,we,xe)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[244,1,2]]]);
//# sourceMappingURL=main.4b86b71d.chunk.js.map